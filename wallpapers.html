<!DOCTYPE html>
<html>

<head>

  <title>Wallpapers</title>
  <link rel="stylesheet" href="meme/style.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Comfortaa">

  <style>
    body {
      font-family: "Comfortaa", sans-serif
    }

    .parallax {
      /* The image used */
      background-image: url('images/background3.jpg');

      /* Full height */
      height: 100%;

      /* Create the parallax scrolling effect */
      background-attachment: fixed;
      background-position: center;
      background-repeat: no-repeat;
      background-size: cover;
    }
  </style>
</head>

<body>
  <div class="loader" id="loader"></div>
  <div class="parallax">
    <ul class="meme" style="grid-template-columns: repeat(2, 1fr);" id="memeul"></ul>
  </div>
  <script>
  if(screen.width/screen.height > 0){
    var URL =
      "https://www.reddit.com/r/wallpaper/top/.json?sort=top&t=today&limit=20";
      } else{
    var URL =
      "https://www.reddit.com/r/MobileWallpaper/top/.json?sort=top&t=today&limit=20";
      }
    const imageList = document.getElementById("memeul");
    //Start the fetching request with request_URL
    fetch(URL)
      .then(data => {
        return data.json(); //Returning the data blob to the fetch request so we can extract the JSON from it.
      })
      .then(posts => {
        hideLoader();
        posts.data.children.forEach(post => {
          //Defining 'PostObject'
          let postObject = {
            imgurl: post.data.preview.images[0].resolutions[3].url,
            highresurl: post.data.url
          };
            var image = '<li class="meme"><a href="'+postObject.highresurl+'" download><img class="meme" src="' + postObject.imgurl + '"></a></li>';
            imageList.innerHTML += image;


        });
      });
    function hideLoader() {
      var loader = document.getElementById("loader");
      loader.style.display = "none";
    }
  </script>

</body>

</html>
